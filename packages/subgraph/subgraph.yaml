specVersion: 0.0.6
schema:
  file: ./schema.graphql
features:
  - ipfsOnEthereumContracts
  - fullTextSearch
dataSources:
  - kind: ethereum/contract
    name: Factory
    network: gnosis
    source:
      abi: Factory
      address: "0x2C9c7E6d05a98f771C22819C80D70827d2d9eBAF"
      startBlock: 28073260
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Oracle
        - KPIToken
      abis:
        - name: Factory
          file: ./abis/Factory.json
        - name: KPITokensManager
          file: ./abis/KPITokensManager.json
        - name: OraclesManager
          file: ./abis/OraclesManager.json
      eventHandlers:
        - event: CreateToken(address)
          handler: handleCreateToken
        - event: SetKpiTokensManager(address)
          handler: handleSetKPITokensManager
        - event: SetOraclesManager(address)
          handler: handleSetOraclesManager
        - event: SetFeeReceiver(address)
          handler: handleSetFeeReceiver
      file: ./src/factory.ts
templates:
  - kind: ethereum/contract
    network: gnosis
    name: KPITokensManager
    source:
      abi: KPITokensManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - KPITokenTemplate
        - KPITokensManager
      abis:
        - name: KPITokensManager
          file: ./abis/KPITokensManager.json
      eventHandlers:
        - event: AddTemplate(indexed uint256,indexed address,string)
          handler: handleAddTemplate
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: RemoveTemplate(indexed uint256)
          handler: handleRemoveTemplate
        - event: UpdateTemplateSpecification(indexed uint256,string,uint256)
          handler: handleUpdateTemplateSpecification
        - event: UpgradeTemplate(indexed uint256,indexed address,uint256,string)
          handler: handleUpgradeTemplate
      file: ./src/kpi-tokens-manager.ts
  - kind: ethereum/contract
    network: gnosis
    name: OraclesManager
    source:
      abi: OraclesManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OracleTemplate
        - OraclesManager
      abis:
        - name: OraclesManager
          file: ./abis/OraclesManager.json
      eventHandlers:
        - event: AddTemplate(indexed uint256,indexed address,string)
          handler: handleAddTemplate
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: RemoveTemplate(indexed uint256)
          handler: handleRemoveTemplate
        - event: UpdateTemplateSpecification(indexed uint256,string,uint256)
          handler: handleUpdateTemplateSpecification
        - event: UpgradeTemplate(indexed uint256,indexed address,uint256,string)
          handler: handleUpgradeTemplate
      file: ./src/oracles-manager.ts
  - kind: ethereum/contract
    network: gnosis
    name: KPIToken
    source:
      abi: KPIToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Oracle
        - KPIToken
      abis:
        - name: KPIToken
          file: ./abis/KPIToken.json
      eventHandlers:
        - event: Initialize()
          handler: handleInitialize
        - event: Finalize(indexed address,uint256)
          handler: handleFinalize
      file: ./src/kpi-token.ts
  - kind: ethereum/contract
    network: gnosis
    name: Oracle
    source:
      abi: Oracle
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Oracle
      abis:
        - name: Oracle
          file: ./abis/Oracle.json
      eventHandlers:
        - event: Initialize(indexed address,indexed uint256)
          handler: handleInitialize
        - event: Finalize(uint256)
          handler: handleFinalize
      file: ./src/oracle.ts
  - kind: file/ipfs
    name: KPITokenTemplateSpecification
    mapping:
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/ipfs.ts
      handler: handleKPITokenTemplateSpecification
      entities:
        - KPITokenTemplateSpecification
      abis: []
    network: gnosis
  - kind: file/ipfs
    name: KPITokenDescription
    mapping:
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/ipfs.ts
      handler: handleKPITokenDescription
      entities:
        - KPITokenDescription
      abis: []
    network: gnosis
  - kind: file/ipfs
    name: OracleTemplateSpecification
    mapping:
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/ipfs.ts
      handler: handleOracleTemplateSpecification
      entities:
        - OracleTemplateSpecification
      abis: []
    network: gnosis

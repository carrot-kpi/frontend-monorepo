import { SiteEvent } from "./fathom-client";

export const generateEventsCode = (siteEvents: {
    siteId: string;
    events: SiteEvent[];
    timestamp: number;
}) => {
    const generatedFileContent = `/*
  * This file is autogenerated, do NOT edit
  */
  export type FathomRegisteredEventName = ${siteEvents.events
      .map((siteEvent) => `'${siteEvent.name}'`)
      .join(" | ")};
  
  export interface FathomSiteEvent {
    id: string;
    object: 'event';
    name: FathomRegisteredEventName;
    currency: string | null
    created_at: string;
  }
  
  export interface FathomSiteInformation {
    siteId: string;
    events: FathomSiteEvent[];
    timestamp: number;
  }
  
  export const siteEvents: FathomSiteInformation = ${JSON.stringify(
      siteEvents,
      null,
      2
  )};
  
  export function getEventId(event: FathomRegisteredEventName): string | undefined {
    return siteEvents.events.find(siteEvent => siteEvent.name === event)?.id;
  }`;

    return generatedFileContent;
};
